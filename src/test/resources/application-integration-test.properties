# Integration Test Profile Configuration
# This profile is used specifically for integration tests

# Use H2 in-memory database for integration tests
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA Configuration for tests
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Actuator configuration for integration tests
management.endpoints.web.exposure.include=health,info,metrics

# Test JWT Configuration (use test values - these should match your custom properties)
application.security.jwt.secret-key=testSecretKeyForIntegrationTestsOnly123456789
application.security.jwt.expiration=3600000
application.security.jwt.refresh-token.expiration=7200000

# OAuth2 Configuration for tests (can be disabled or mocked)
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://accounts.google.com
spring.security.oauth2.resourceserver.jwt.audiences=test-audience

# Logging configuration for tests
logging.level.com.exploresg.authservice=INFO
logging.level.org.springframework.security=DEBUG
logging.level.sql=DEBUG

# Test-specific properties
spring.test.database.replace=none
spring.sql.init.mode=always

# ============================================
# RabbitMQ Configuration (for tests)
# ============================================
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.virtual-host=/

# Disable RabbitMQ health check in tests (RabbitMQ not running)
management.health.rabbit.enabled=false

# RabbitMQ Exchange and Queue Configuration
rabbitmq.exchange.user-events=exploresg.user.created
rabbitmq.queue.user-created=exploresg.user.created
rabbitmq.routing-key.user-created=